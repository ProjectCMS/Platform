!function(t){"use strict";var e,n=function(){};n.prototype.initEditor=function(){tinymce.init({selector:".textarea",skin:"custom",branding:!1,menubar:!1,content_css:["/Themes/fonik/assets/css/theme.css"],language:"pt_BR",entity_encoding:"raw",plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak","searchreplace visualblocks visualchars fullscreen insertdatetime media nonbreaking","table directionality emoticons template textcolor paste textcolor colorpicker textpattern autoresize imagetools code"],toolbar1:"manager bold italic strikethrough numlist bullist blockquote hr alignleft aligncenter alignright link unlink image media",toolbar2:"formatselect underline alignjustify forecolor paste searchreplace removeformat charmap outdent indent undo redo print fullscreen code",relative_urls:!1,remove_script_host:!1,setup:function(t){t.addButton("manager",{text:"Adicionar Mídia",icon:"browse",tooltip:"Adicionar Mídia",shortcut:"Ctrl+E",onclick:e.modalEditor}),t.addShortcut("Ctrl+E","",e.modalEditor),t.addMenuItem("manager",{text:"Adicionar Mídia",icon:"browse",tooltip:"Adicionar Mídia",onclick:e.modalEditor,context:"insert"})},file_picker_callback:function(t,n,i){e.modalEditor("insert",t,n,i)}})},n.prototype.initAjaxAciton=function(){t(".ajax-action").on("click",function(e){e.preventDefault();var n=confirm("Deseja mesmo executar essa ação?"),i=t(this).data("method")?t(this).data("method"):"post",a=t(this).attr("href"),o=t(this).data();1==n&&t.post({url:a,method:i,headers:{"X-CSRF-TOKEN":app.token}},o,function(t){location.reload()})})},n.prototype.initAjaxModules=function(){t(".ajax-module").on("click",function(e){e.preventDefault();var n=t(this),i=t(this).is(":checked"),a=t(this).val(),o=t(this).closest("table").data("href");t.post({url:o,headers:{"X-CSRF-TOKEN":app.token}},{status:i,module:a},function(t){0==t.status&&0==i?(n.prop("checked",!0),alert(t.msg)):location.reload()})})},n.prototype.initCustomTable=function(){var n=t(".table");t.each(n.find("th[data-sort]"),function(n,i){var a=e.parseParamns(e.request),o=t(this).data();t(this).attr("data-order")||t(this).attr("data-order",""),o.sort==a.sort&&t(this).attr("data-order",a.order)}),n.on("click","th[data-sort]",function(n){var i=t(this).attr("data-sort"),a=t(this).attr("data-order")?t(this).attr("data-order"):"desc",o="desc"===a?"asc":"desc",r=e.parseParamns(e.request);t(this).attr("data-order",o),r.order=o,r.sort=i,delete r.page,location.href="?"+t.param(r),n.preventDefault()})},n.prototype.initMasks=function(){t(".money").maskMoney({showSymbol:!1,symbol:"R$",decimal:",",thousands:"."})},n.prototype.initGrid=function(){var n=e.grid,i=e.filesInput,a=e.ordering,o=e.order;i.find("option").attr("selected","selected"),n.on("click",".item .delete-image",function(n){var a=t(this).closest(".item").data("image");t(this).closest(".item").remove(),i.find('option[value="'+a+'"]').remove(),e.gridItemsData()}),n.sortable({items:"> .sortable",update:function(n,i){a.removeClass("disabled"),o=t(this).sortable("toArray"),e.gridItemsData()}}),n.disableSelection(),a.on("click",function(e){var n=t(this).attr("href");t.post({url:n,headers:{"X-CSRF-TOKEN":app.token},method:"put"},{order:o},function(){a.addClass("disabled"),alert("Ordenação alterada")}),e.preventDefault()}),e.gridResize()},n.prototype.gridResize=function(){var n=e.grid;t(window).on("resize load",function(){var e=t("body").width();e<=576?n.attr("data-columns",1):e>576&&e<=768?n.attr("data-columns",3):e>768&&e<=1200?n.attr("data-columns",4):n.attr("data-columns",5)})},n.prototype.gridItemsData=function(){e.jsonInput=[],t.each(e.grid.find(".item .item-content"),function(t,n){e.jsonInput.push(this.dataset)}),e.filesInput.val(JSON.stringify(e.jsonInput))},n.prototype.initCheckbox=function(){t('[data-check="all"]').on("click",function(){t('[data-check="single"]').not(this).prop("checked",this.checked)})},n.prototype.parseParamns=function(t){return t?t.split("&").reduce(function(t,e){var n=e.split("=").map(function(t){return decodeURIComponent(t.replace(/\+/g," "))});return t[n[0]]=n[1],t},{}):{}},n.prototype.imageOrientation=function(t){var e=new Image;return e.src=t,e.naturalWidth>e.naturalHeight?"landscape":e.naturalWidth<e.naturalHeight?"portrait":"even"},n.prototype.modalEditor=function(e,n,i,a){"insert"==e?t(this).manager({manager:app.urlManager,tools:!0,multiple:!1,dataFile:i,root:"filemanager",data:{type:a.filetype},complete:function(e){e.length&&t.each(e,function(t,e){n(e.url)})}}):t(this).manager({manager:app.urlManager,tools:!0,multiple:!0,root:"filemanager",complete:function(e){e.length&&t.each(e,function(t,e){tinymce.activeEditor.execCommand("mceInsertContent",!1,e.html)})}})},n.prototype.fileManager=function(e){t(this).manager({manager:manager,tools:!0,multiple:!1,root:"filemanager",data:{type:"image"},complete:function(t){e(t)}})},n.prototype.changeImage=function(){t(".change-image").on("click",function(n){n.preventDefault(),e.fileManager(function(e){t(".single-image").val(e[0].path),t(".content-image").empty().html(e[0].html)})}),t(".remove-image").on("click",function(e){t(".single-image").val(""),t(".content-image").empty()})},n.prototype.nl2br=function(t){if(t)return t=t.trim(),t.replace(/(\r\n|\n\r|\r|\n)/g,"<p>")},n.prototype.br2nl=function(t){if(t)return t=t.trim(),t.replace(/<br>/g,"\r")},n.prototype.init=function(){t(".textarea").val(this.br2nl(t(".textarea").val())),t(".textarea").val(this.nl2br(t(".textarea").val())),e=this,this.grid=t(".grid"),this.ordering=t(".ordering"),this.order=[],this.filesInput=t(".files-input"),this.jsonInput=[],this.request=app.request.replace(/&amp;/g,"&"),this.initEditor(),this.initAjaxAciton(),this.initAjaxModules(),this.initCustomTable(),this.initMasks(),this.initGrid(),this.initCheckbox()},t.App=new n,t.App.Constructor=n}(window.jQuery),function(t){"use strict";t.App.init()}(window.jQuery);var listPDF=$(".grid");!function(t){"use strict";var e,n,i=function(){};i.prototype.initFilesManager=function(){n.jsonInput=n.filesInput.val()?n.filesInput.val():null,null!=n.jsonInput&&"pdf"==n.filesInput.data("input")&&(n.jsonInput=JSON.parse(n.filesInput.val()),t.each(n.jsonInput,function(t,n){e.pngToPDF(t,n)}))},i.prototype.managerPDF=function(){t(".manager-pdf").on("click",function(i){i.preventDefault(),t(this).manager({manager:manager,tools:!0,multiple:!1,root:"revistas",complete:function(i){var a=i[0].storage;t.post({url:urlMagazine,headers:{"X-CSRF-TOKEN":app.token}},{storage:a},function(i){n.initGrid(),t.each(i,function(t,n){e.pngToPDF(t,n)}),e.actionItems(),n.gridItemsData("magazine")})}})})},i.prototype.pngToPDF=function(t,e){if(pdfjsLib.disableStream=!0,e.url){var i=pdfjsLib.getDocument(e.url),a=n.grid.append('<div class="item sortable" id="'+e.id+'"><div class="pdf-content item-content" data-id="'+e.id+'" data-path="'+e.path+'" data-subscriber="'+e.subscriber+'">\n<div id="dropdown" class="btn-group-sm">\n<button class="dripicons-gear btn btn-primary" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>\n<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">\n<a class="dropdown-item text-muted item-subscriber" href="#"><i class="ti-medall text-warning"></i> Apenas inscritos</a>\n<div class="dropdown-divider"></div>\n<a class="dropdown-item text-muted item-delete" href="#"><i class="ti-trash text-danger"></i> Deletar</a>\n</div>\n</div>\n<div class="load"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i>\n<span>Carregando...</span></div></div></div>'),o=a.find("#"+e.id);i.promise.then(function(t){t.getPage(1).then(function(t){var e=t.getViewport(1),n=document.createElement("canvas"),i=n.getContext("2d");n.height=e.height,n.width=e.width;var a={canvasContext:i,viewport:e};t.render(a).then(function(){o.find(".pdf-content").append('<img src="'+n.toDataURL("image/jpeg",1)+'">')})})},function(t){console.error(t)})}},i.prototype.actionItems=function(){var e=n.grid.find(".item .item-subscriber"),i=n.grid.find(".item .item-delete");e.on("click",function(e){e.preventDefault();var i=t(this).closest(".pdf-content");0==i.attr("data-subscriber")?i.attr("data-subscriber",1):i.attr("data-subscriber",0),n.gridItemsData("magazine")}),i.on("click",function(e){e.preventDefault(),1==confirm("Tem certeza que deseja deletar está página?")&&t(this).closest(".item").remove(),n.gridItemsData("magazine")})},i.prototype.init=function(){e=this,n=t.App,this.initFilesManager(),this.managerPDF(),this.actionItems()},t.Magazine=new i,t.Magazine.Constructor=i}(window.jQuery),function(t){"use strict";t.Magazine.init()}(window.jQuery),function(t){t.fn.manager=function(e){var n=this,i={},a=t.extend({complete:function(){},multiple:!1,tools:!1,manager:"",root:"",data:"",dataFile:""},e),o=t("body");this.each(function(){i={root:a.root?btoa(a.root):"",tools:a.tools,dataFile:a.dataFile,multiple:!a.file&&a.multiple},i=t.extend(a.data,i),t.get(manager,i,function(e){var n=document.createElement("div"),i=Math.floor(999999*Math.random())+0,a="content-manager-"+i;n.setAttribute("id",a),t(o).children("#"+a).remove(),t(o).append(n),t(o).children("#"+a).append(e),abrir_modal(a),fechar_modal(a),selecionar_arquivos(a)})}),abrir_modal=function(e){t(o).find("#"+e).css("position","relative"),t(o).find("#"+e).css("z-index","999999999"),t(o).find("#"+e).find(".modal-manager").modal({show:!0}),t(o).find("#"+e).find(".manager ul li").removeClass("selected")},fechar_modal=function(e){t(o).find("#"+e).find(".modal-manager").on("hide.bs.modal",function(n){t(o).children("#"+e).remove()})},selecionar_arquivos=function(e){t(o).children("#"+e).find("iframe").on("load",function(){var i=t(this).contents();i.find("#insert-item").on("click",function(){var r=[],s=[];if(i.find(".check-item:checkbox:checked").each(function(e,n){r[e]=atob(t(this).val()),s[e]=t(this).closest(".item").data()}),s){var c=[];t.each(s,function(t,e){if("folder"!=e.type){switch(e.type){case"text":case"application":e.html='<a href="'+e.url+'">'+e.file+"</a>";break;case"image":e.html='<img src="'+e.url+'">';break;case"audio":e.html='<audio controls><source src="'+e.url+'"></audio >';break;case"video":e.html='<video controls><source src="'+e.url+'"></video>'}e.path=atob(e.path),c[t]=e}}),t.isFunction(a.complete)&&a.complete.call(n,c),t(o).find("#"+e).find(".modal-manager").modal("hide")}})})}}}(jQuery),function(t){"use strict";var e,n,i=function(){},a=t(".dd"),o=t(".menu-items");i.prototype.initManagerMenu=function(){var n=t(".add-item-menu"),i=t(".add-item-menu-link");n.on("click",function(i){i.preventDefault();var o=t(".parent-menu").find('[type="checkbox"]:checked'),r=[];o.length>=1&&(t.each(o,function(e,n){var i=t(this).closest(".parent-menu").data("type"),a={provider_type:i,item:t(this).val()};r.push(a)}),e.postMenu(r,!0,function(t){o.prop("checked",!1),n.prop("disabled",!1),a.find("#dd-main").append(t),e.getNestableMenu()}))}),i.on("click",function(n){n.preventDefault();var i=t(".parent-link").find("input"),o=[],r=!1;t.each(i,function(n,i){var a=t(this).data("link"),s=t(this).val();return"url"==a&&0==e.checkUrl(s)?(alert("URL digitada é inválida!"),r=!1,!1):""==s?(alert("Preencha todos os campos do link personalizado!"),r=!1,!1):(r=!0,void(o[a]=s))}),o=t.extend({},o),r&&e.postMenu(o,!1,function(t){a.find("#dd-main").append(t),e.getNestableMenu(),i.val("")})})},i.prototype.postMenu=function(e,n,i){var a;a=1==n?{items:e}:e,t.post({url:app.urlMenuItem,headers:{"X-CSRF-TOKEN":app.token}},a,function(t){i(t)})},i.prototype.getNestableMenu=function(){var e=a.nestable("toArray"),n=[];e.length&&(t.each(e,function(e,i){var o=a.find(".dd-item").filter('[data-id="'+i.id+'"]'),r=o.find("#cl-"+i.id+" input"),s=[];i.elements=[],t.each(r,function(){var e=t(this).data("link"),n=t(this).val(),i={};i[e]=n,s=t.extend(s,i)}),s=t.extend({},s),i.elements=s,n.push(i)}),o.val(JSON.stringify(n)))},i.prototype.checkUrl=function(t){return!!/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(t)},i.prototype.removeItem=function(){t(".remove-item").on("click",function(n){n.preventDefault(),t(this).closest(".dd-item").remove(),e.getNestableMenu()})},i.prototype.setMenu=function(){var e=t(".set-menu"),n=e.closest(".form").data("url");e.closest(".form").find(".btn").on("click",function(){var t=e.val();""!=t&&(location.href=n+"/"+t)})},i.prototype.getInputValue=function(){a.find("input").on("keyup",function(){e.getNestableMenu()})},i.prototype.initNestableMenu=function(){a.nestable({callback:function(){e.getNestableMenu()}})},i.prototype.init=function(){e=this,n=t.App,this.initManagerMenu(),this.initNestableMenu(),this.getNestableMenu(),this.removeItem(),this.setMenu(),this.getInputValue()},t.Menus=new i,t.Menus.Constructor=i}(window.jQuery),function(t){"use strict";t.Menus.init()}(window.jQuery);var tags=$(".tags"),tagList=tags.find("li"),tagSelect=$(".tag-select"),tagInput=$(".tag-input"),tagsData=$("[data-tags]"),tagBtn=$(".insert-tag"),tagsJson=[];!function(t){"use strict";var e,n,i=function(){};i.prototype.initTags=function(){t.each(tagList,function(n){var i=t(this);e.pushTags(i.data("name"))}),tagBtn.on("click",function(){""!=tagInput.val()&&(t.each(e.split(tagInput.val()),function(t,n){-1===tagsJson.indexOf(n)&&""!=n&&e.pushTags(n,!0)}),tagInput.val(""))}),tags.on("click","li span",function(){var e=t(this).closest("li"),n=e.data("name");tagsJson.splice(tagsJson.indexOf(n),1),e.remove(),tagSelect.find('option[value="'+n+'"]').remove()}),tagInput.on("keydown",function(e){e.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,maxResults:10,source:function(n,i){i(t.ui.autocomplete.filter(tagsData.data("tags"),e.extractLast(n.term)).slice(0,this.options.maxResults))},focus:function(){return!1},select:function(t,n){var i=e.split(this.value);return i.pop(),i.push(n.item.value),i.push(""),this.value=i.join(", "),!1}})},i.prototype.initFileManager=function(){t(".manager-image").on("click",function(e){e.preventDefault(),t(this).manager({manager:manager,tools:!0,multiple:!0,data:{type:"image"},complete:function(e){e.length&&(t.each(e,function(t,e){var i=n.imageOrientation(e.url),a=Math.floor(9999999*Math.random()+1);n.grid.append('<div class="item sortable" id="'+a+'"><div class="item-content" data-id="'+a+'" data-path="'+e.path+'"><div class="delete-image"></div><img src="'+e.url+'" data-orientation="'+i+'"></div></div>')}),n.gridItemsData("posts"))}})}),n.changeImage()},i.prototype.pushTags=function(t,e){1==e&&tags.append('<li class="list-inline-item" data-name="'+t+'"><span></span>'+t+"</li>"),tagSelect.append('<option value="'+t+'" selected>'+t+"</option>"),tagsJson.push(t)},i.prototype.split=function(t){return t.split(/,\s*/)},i.prototype.extractLast=function(t){return e.split(t).pop()},i.prototype.init=function(){e=this,n=t.App,this.initTags(),this.initFileManager()},t.Posts=new i,t.Posts.Constructor=i}(window.jQuery),function(t){"use strict";t.Posts.init()}(window.jQuery),function(t){"use strict";var e,n,i=function(){};i.prototype.initMainChart=function(){var t=[{y:"2006",a:100,b:90},{y:"2007",a:75,b:65},{y:"2008",a:50,b:40},{y:"2009",a:75,b:65},{y:"2010",a:50,b:40},{y:"2011",a:75,b:65},{y:"2012",a:100,b:90},{y:"2013",a:90,b:75},{y:"2014",a:75,b:65},{y:"2015",a:50,b:40},{y:"2016",a:75,b:65},{y:"2017",a:100,b:90}];e.createBarChart("morris-bar-example",t,"y",["a","b"],["Series A","Series B"],["#2f8ee0","#4bbbce"])},i.prototype.createBarChart=function(t,e,n,i,a,o){null!==document.getElementById(t)&&Morris.Bar({element:t,data:e,xkey:n,ykeys:i,labels:a,gridLineColor:"rgba(255,255,255,0.1)",gridTextColor:"#98a6ad",barSizeRatio:.2,resize:!0,hideHover:"auto",barColors:o})},i.prototype.init=function(){e=this,n=t.App,e.initMainChart()},t.Tracker=new i,t.Tracker.Constructor=i}(window.jQuery),function(t){"use strict";t.Tracker.init()}(window.jQuery),function(t){"use strict";var e,n=function(){};n.prototype.initCheckBox=function(){var e=t(".input-check-all"),n=t(".checkboxs-route");e.on("click",function(e){t(this).closest(".item").find(".checkboxs-route").prop("checked",t(this).prop("checked"))}),n.on("change",function(){if(!t(this).prop("checked")){t(this).closest(".item").find(".input-check-all").prop("checked",!1)}}),e.closest(".item").each(function(){var e=t(this).find(".checkboxs-route");e.length==e.filter(":checked").length&&t(this).find(".input-check-all").prop("checked",!0)})},n.prototype.init=function(){e=this,this.initCheckBox()},t.Users=new n,t.Users.Constructor=n}(window.jQuery),function(t){"use strict";t.Users.init()}(window.jQuery);